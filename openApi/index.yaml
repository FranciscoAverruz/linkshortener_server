  /admin-user/{id}:
    get:
      tags:
        - Administration
      summary: "Get user details by ID."
      description: "Retrieve detailed information for a specific user by their unique identifier."
      allOf:
        - $ref: './components/userDetails.yaml#/getOneUser'

    put:
      tags:
        - Administration
      summary: "Update user information by ID"
      description: "Update the details of a specific user by their ID, without modifying the password."
      allOf:
        - $ref: './components/userDetails.yaml#/updateUser'        

  /admin-user/{id}/password:
    put:
      tags:
        - Administration
      summary: "Change a user's password"
      description: "Change a user's password by providing the current and new passwords."
      allOf:     
        - $ref: './components/userDetails.yaml#/changePassword'
  
  /admin-user/{id}/request-deletion:
    post:
      tags:
        - Administration
      summary: "Account deletion request"
      description: > 
        Allows a user to request their account deletion.
        - **Administrators** can delete the account immediately or schedule it for deletion by specifying `deletionTimeInHours`.
      allOf:
        - $ref: './components/userDetails.yaml#/accountDeletion'
  
  /admin-user/{id}/cancel-deletion:
    post:
      tags:
        - Administration
      summary: "Cancel account deletion."
      description: "Cancel account deletion (before the 24-hour period ends)."
      allOf:
        - $ref: './components/userDetails.yaml#/cancelDeletion'
  /admin/all-users:
    get:
      tags:
        - Administration
      summary: "Obtener todos los usuarios"
      description: "Devuelve una lista de todos los usuarios registrados."
      operationId: retUsersAll
      responses:
        '200':
          description: "Lista de todos los usuarios"
        '404':
          description: "No se encontraron usuarios"

  # Crear nuevo usuario (reutiliza ruta de user.yaml)
  /admin:
    post:
      tags:
        - Administration
      summary: "Crear nuevo usuario"
      description: "Crea un nuevo usuario en el sistema."
      operationId: createUser
      requestBody:
        $ref: './components/requestBodies.yaml#/createUser'
        # content:
        #   application/json:
        #     schema:
        #       type: object
        #       properties:
        #         username:
        #           type: string
        #         password:
        #           type: string
      responses:
        '201':
          description: "Usuario creado exitosamente"
        '400':
          description: "Error al crear usuario"
  /login:
    post:
      tags:
        - Authentication
      summary: "Inicio de sesión"
      description: "Permite a un usuario iniciar sesión."
      operationId: loginUser
      security: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: "Éxito al iniciar sesión"
        '400':
          description: "Error en los datos de inicio de sesión"

  /signup:
    post:
      tags:
        - Authentication
      summary: "Registro de usuario"
      description: "Permite a un nuevo usuario registrarse."
      operationId: signupUser
      security: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '201':
          description: "Usuario creado con éxito"
        '400':
          description: "Error al crear usuario"

  /logout:
    post:
      tags:
        - Authentication
      summary: "Cerrar sesión"
      description: "Permite a un usuario cerrar sesión."
      operationId: logoutUser
      responses:
        '200':
          description: "Éxito al cerrar sesión"
        '401':
          description: "No autorizado"

  /admin-user/{id}/stats:
    get:
      tags:
        - Stats
      summary: "Get general statistics for the user's URLs"
      description: "Returns the statistics of the user's URLs, including total clicks per URL."
      allOf: 
        - $ref: './components/userDetails.yaml#/userStatistics'

  /admin-user/{id}/stats/{shortId}:
    get:
      tags:
        - Stats
      summary: "Get statistics for a specific URL"
      description: "Returns the statistics of a specific URL by its shortId, including total clicks, device types, and locations."
      allOf:
        - $ref: './components/userDetails.yaml#/urlStatistic'

  /user/{id}/stats:
    get:
      tags:
        - Stats
      summary: "Get general statistics for the user's URLs"
      description: "Returns the statistics of the user's URLs, including total clicks per URL."
      allOf: 
        - $ref: './components/userDetails.yaml#/userStatistics'

  /user/{id}/stats/{shortId}:
    get:
      tags:
        - Stats
      summary: "Get statistics for a specific URL"
      description: "Returns the statistics of a specific URL by its shortId, including total clicks, device types, and locations."
      allOf:
        - $ref: './components/userDetails.yaml#/urlStatistic'
  /invited/shortenId:
    post:
      summary: "Shorten a URL link"
      description: "Accepts an original URL and generates a random short URL, which expires 24 hours after its creation."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas.yaml#/invitedPost'
      responses:
        201:
          description: Short URL generated successfully.
        400:
          $ref: './components/responses.yaml#/badRequest'
        500:
          $ref: './components/responses.yaml#/serverError'
  /{shortId}:
    get:
      summary: "Redirigir a URL"
      description: "Redirige a la URL original a partir de una URL corta."
      operationId: urlRedirect
      parameters:
        - in: path
          name: shortenedUrl
          required: true
          schema:
            type: string
      responses:
        '302':
          description: "Redirección exitosa"
        '404':
          description: "Enlace no encontrado"

  /admin-user/{id}/urls/shorten:
    $ref: './components/urlUsersComponent.yaml#/shorten'

  /user/{id}/urls/shorten:
    $ref: './components/urlUsersComponent.yaml#/shorten'

  /admin-user/{id}/urls/delete:
    $ref: './components/urlUsersComponent.yaml#/deletion'

  /user/{id}/urls/delete:
    $ref: './components/urlUsersComponent.yaml#/deletion'

  /user/{id}:
    get:
      tags:
        - User
      summary: "Get user details by ID."
      description: "Retrieve detailed information for a specific user by their unique identifier."
      allOf:
        - $ref: './components/userDetails.yaml#/getOneUser'

    put:
      tags:
        - User
      summary: "Update user information by ID"
      description: "Update the details of a specific user by their ID, without modifying the password."
      allOf:
        - $ref: './components/userDetails.yaml#/updateUser'

  /user/{id}/password:
    put:
      tags:
        - User
      summary: "Change a user's password"
      description: "Change a user's password by providing the current and new passwords."
      allOf:     
        - $ref: './components/userDetails.yaml#/changePassword'
  
  /user/{id}/request-deletion:
    post:
      tags:
        - User
      summary: "Account deletion request"
      description: > 
        Allows a user to request their account deletion.
        - **Regular users** can only schedule their own account for deletion (default is 24 hours).
      allOf:
        - $ref: './components/userDetails.yaml#/accountDeletion'
  
  /user/{id}/cancel-deletion:
    post:
      tags:
        - User
      summary: "Cancel account deletion."
      description: "Cancel account deletion (before the 24-hour period ends)."
      allOf:
        - $ref: './components/userDetails.yaml#/cancelDeletion'
