openapi: 3.0.0
info:
  title: API de Acortador de URL
  version: 1.0.0
  description: Una API RESTful para gestionar URLs acortadas
servers:
  - url: 'http://localhost:3500/api'
tags:
  - name: Authentication
    description: 'Operations related to login, registration, and URL redirection.'
  - name: Administration
    description: Administrative operations requiring administrator permissions.
  - name: User
    description: Operations for managing users and their data.
  - name: URLs
    description: 'Operations to shorten, redirect, and manage URLs.'
  - name: Stats
    description: Operations for obtaining statistics of user URLs.
security:
  - bearerAuth: []
paths:
  '/admin-user/{id}':
    get:
      tags:
        - Administration
      summary: Get user details by ID.
      description: >-
        Retrieve detailed information for a specific user by their unique
        identifier.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          responses:
            allOf:
              - '200':
                  description: User successfully created or retrieved.
                  content:
                    application/json:
                      schema:
                        allOf:
                          - type: object
                            properties:
                              username:
                                type: string
                                description: The username of the user
                                example: newUser123
                              email:
                                type: string
                                format: email
                                description: The email of the user
                                example: newEmail@example.com
                              isAdmin:
                                type: boolean
                                description: >-
                                  A flag indicating whether the user is an
                                  admin. Default is false for regular users.
                                default: false
                            required:
                              - username
                              - email
                              - isAdmin
                          - type: object
                            properties:
                              _id:
                                type: string
                                description: Unique identifier for the user
                              urls:
                                type: array
                                items:
                                  type: string
                                  format: uuid
                                  description: >-
                                    Array of URLs associated with the user
                                    (references to other documents)
                              createdAt:
                                type: string
                                format: date-time
                                description: The date and time when the user was created
                              updatedAt:
                                type: string
                                format: date-time
                                description: >-
                                  The date and time when the user was last
                                  updated
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
    put:
      tags:
        - Administration
      summary: Update user information by ID
      description: >-
        Update the details of a specific user by their ID, without modifying the
        password.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            description: Datos para actualizar un usuario.
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    username:
                      type: string
                      description: The username of the user
                      example: newUser123
                    email:
                      type: string
                      format: email
                      description: The email of the user
                      example: newEmail@example.com
                    isAdmin:
                      type: boolean
                      description: >-
                        A flag indicating whether the user is an admin. Default
                        is false for regular users.
                      default: false
                  required:
                    - username
                    - email
                    - isAdmin
          responses:
            allOf:
              - '200':
                  description: User updated successfully.
                  content:
                    application/json:
                      schema:
                        - type: object
                          properties:
                            username:
                              type: string
                              description: The username of the user
                              example: newUser123
                            email:
                              type: string
                              format: email
                              description: The email of the user
                              example: newEmail@example.com
                            isAdmin:
                              type: boolean
                              description: >-
                                A flag indicating whether the user is an admin.
                                Default is false for regular users.
                              default: false
                          required:
                            - username
                            - email
                            - isAdmin
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/change-password':
    put:
      tags:
        - Administration
      summary: Change a user's password
      description: Change a user's password by providing the current and new passwords.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            description: Datos para cambiar la contraseña de un usuario.
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    currentPassword:
                      type: string
                      description: Contraseña actual del usuario.
                      example: '123456'
                    newPassword:
                      type: string
                      description: Nueva contraseña que desea establecer.
                      example: newpassword123
                    confirmPassword:
                      type: string
                      description: Confirmación de la nueva contraseña.
                      example: newpassword123
                  additionalProperties: false
          responses:
            allOf:
              - '200':
                  description: password updated successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: You have successfully updated your password.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/setup-password':
    post:
      tags:
        - Administration
      summary: Set up a password
      description: >-
        Allows users to set their password after account creation via a secure
        link sent by email.
      allOf:
        - requestBody:
            description: Request body for setting up a new password after account creation
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    token:
                      type: string
                      description: The token sent to the user in the password setup email.
                    newPassword:
                      type: string
                      description: The new password the user wants to set.
                    confirmPassword:
                      type: string
                      description: >-
                        Confirmation of the new password to ensure both
                        passwords match.
                  required:
                    - token
                    - newPassword
                    - confirmPassword
          responses:
            allOf:
              - '200':
                  description: password updated successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: You have successfully updated your password.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/request-newPassword':
    post:
      tags:
        - Administration
      summary: Request a password reset
      description: >-
        Sends a password reset email to the provided email address with a reset
        link.
      allOf:
        - requestBody:
            description: Request body for setting up a new password after account creation
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    email:
                      type: string
                      format: email
                      description: >-
                        The email address of the user requesting a password
                        reset.
                      example: user@example.com
          responses:
            allOf:
              - '200':
                  description: Password reset email sent successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: >-
                              Password reset email has been sent. Please check
                              your inbox.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/request-deletion':
    post:
      tags:
        - Administration
      summary: Account deletion request
      description: >
        Allows a user to request their account deletion. - **Regular users** can
        only schedule their own account for deletion (default is 24 hours).
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    deletionTimeInHours:
                      type: integer
                      description: >
                        The number of hours until the account is deleted.   - If
                        0 or omitted, the deletion is immediate (for admins).  
                        - Must be a positive number to schedule a future
                        deletion.
                      example: 48
                  required:
                    - deletionTimeInHours
          responses:
            allOf:
              - '200':
                  description: Request submitted successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: >-
                              Your account deletion will be completed in 24
                              hours.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/cancel-deletion':
    post:
      tags:
        - Administration
      summary: Cancel account deletion.
      description: Cancel account deletion (before the 24-hour period ends).
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          responses:
            allOf:
              - '200':
                  description: Request submitted successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: >-
                              Your account deletion has been canceled. Thank you
                              for continuing to use our service.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  /admin/all-users:
    get:
      tags:
        - Administration
      summary: Get all users
      description: Returns a collection of all existing users.
      responses:
        '200':
          description: Lista de todos los usuarios
        '404':
          description: No se encontraron usuarios
  /admin:
    post:
      tags:
        - Administration
      summary: Creates a new user
      description: Adds a new user profile to the system.
      requestBody:
        description: Datos para actualizar un usuario.
        required: true
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  properties:
                    username:
                      type: string
                      description: The username of the user
                      example: newUser123
                    email:
                      type: string
                      format: email
                      description: The email of the user
                      example: newEmail@example.com
                    isAdmin:
                      type: boolean
                      description: >-
                        A flag indicating whether the user is an admin. Default
                        is false for regular users.
                      default: false
                  required:
                    - username
                    - email
                    - isAdmin
                - type: object
                  properties:
                    password:
                      type: string
                      description: The username of the user
                      example: newUser123
                    confirmPassword:
                      type: string
                      description: Confirmación de la nueva contraseña.
                      example: newpassword123
                    urls:
                      type: array
                      description: >-
                        List of URLs associated with the user. It can be empty
                        or null if the user hasn't added any URLs yet.
                      items:
                        type: string
                        example: 'https://example.com'
                      nullable: true
                      default: []
                  required:
                    - password
    responses:
      allOf:
        - '200':
            description: User successfully created or retrieved.
            content:
              application/json:
                schema:
                  allOf:
                    - type: object
                      properties:
                        username:
                          type: string
                          description: The username of the user
                          example: newUser123
                        email:
                          type: string
                          format: email
                          description: The email of the user
                          example: newEmail@example.com
                        isAdmin:
                          type: boolean
                          description: >-
                            A flag indicating whether the user is an admin.
                            Default is false for regular users.
                          default: false
                      required:
                        - username
                        - email
                        - isAdmin
                    - type: object
                      properties:
                        _id:
                          type: string
                          description: Unique identifier for the user
                        urls:
                          type: array
                          items:
                            type: string
                            format: uuid
                            description: >-
                              Array of URLs associated with the user (references
                              to other documents)
                        createdAt:
                          type: string
                          format: date-time
                          description: The date and time when the user was created
                        updatedAt:
                          type: string
                          format: date-time
                          description: The date and time when the user was last updated
        - '400':
            description: >-
              The request could not be processed due to invalid or duplicated
              input, missing parameters, or mismatched data.
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message:
                      type: string
                      description: A detailed message about the error.
                      example: >-
                        The request could not be processed due to invalid or
                        expired input, missing parameters, or mismatched data.
          '401':
            description: >-
              You are not authorized to access this resource. Please log in and
              try again.
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message:
                      type: string
                      description: A detailed message about the error.
                      example: >-
                        You are not authorized to access this resource. Please
                        log in and try again.
          '404':
            description: >-
              The requested resource could not be found. Please check the
              provided data and try again.
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message:
                      type: string
                      description: A detailed message about the error.
                      example: >-
                        The requested resource could not be found. Please check
                        the provided data and try again.
          '500':
            description: >-
              An unexpected error occurred on the server. Please try again
              later.
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message:
                      type: string
                      description: A detailed message about the error.
                      example: >-
                        An unexpected error occurred on the server. Please try
                        again later.
  /login:
    post:
      tags:
        - Authentication
      summary: Inicio de sesión
      description: Permite a un usuario iniciar sesión.
      security: []
      allOf:
        - requestBody:
            description: Request body to log in
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    email:
                      type: string
                      format: email
                      description: The email of the user
                      example: newEmail@example.com
                    password:
                      type: string
                      description: The user's password
                      example: newUser123
          responses:
            allOf:
              - '200':
                  description: Successful login. A JWT token is returned.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          token:
                            type: string
                            description: JWT token generated for the user.
                            example: >-
                              eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxMjM0NTY3ODkwLCJleHBpcnkiOjEyMzQ1Njc4OTAgfQ.XeQF1G6ZGnzGv9Qrfm8tL8r8JkxY
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  /signup:
    post:
      tags:
        - Authentication
      summary: Registro de usuario
      description: >
        This function allows users to register. If the user is an admin, they
        can create another user and send an email for password setup.  For
        non-admin users, they can register normally and receive a registration
        confirmation email.
      security: []
      allOf:
        - requestBody:
            description: Datos para actualizar un usuario.
            required: true
            content:
              application/json:
                schema:
                  allOf:
                    - type: object
                      properties:
                        username:
                          type: string
                          description: The username of the user
                          example: newUser123
                        email:
                          type: string
                          format: email
                          description: The email of the user
                          example: newEmail@example.com
                        isAdmin:
                          type: boolean
                          description: >-
                            A flag indicating whether the user is an admin.
                            Default is false for regular users.
                          default: false
                      required:
                        - username
                        - email
                        - isAdmin
                    - type: object
                      properties:
                        password:
                          type: string
                          description: The username of the user
                          example: newUser123
                        confirmPassword:
                          type: string
                          description: Confirmación de la nueva contraseña.
                          example: newpassword123
                        urls:
                          type: array
                          description: >-
                            List of URLs associated with the user. It can be
                            empty or null if the user hasn't added any URLs yet.
                          items:
                            type: string
                            example: 'https://example.com'
                          nullable: true
                          default: []
                      required:
                        - password
          responses:
            allOf:
              - '201':
                  description: User registered successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: The User was successfully registered.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  /logout:
    post:
      tags:
        - Authentication
      summary: Log out
      description: Allows a user to log out.
      responses:
        allOf:
          - '200':
              description: logged out
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        example: >-
                          You have successfully logged out, please come back
                          soon.
          - '400':
              description: >-
                The request could not be processed due to invalid or duplicated
                input, missing parameters, or mismatched data.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          The request could not be processed due to invalid or
                          expired input, missing parameters, or mismatched data.
            '401':
              description: >-
                You are not authorized to access this resource. Please log in
                and try again.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          You are not authorized to access this resource. Please
                          log in and try again.
            '404':
              description: >-
                The requested resource could not be found. Please check the
                provided data and try again.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          The requested resource could not be found. Please
                          check the provided data and try again.
            '500':
              description: >-
                An unexpected error occurred on the server. Please try again
                later.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          An unexpected error occurred on the server. Please try
                          again later.
  '/admin-user/{id}/stats':
    get:
      tags:
        - Stats
      summary: Get general statistics for the user's URLs
      description: >-
        Returns the statistics of the user's URLs, including total clicks per
        URL.
      allOf:
        - parameters:
            allOf:
              - name: id
                in: path
                required: true
                description: The ID of the user to retrieve
                schema:
                  type: string
                  example: abc123
              - name: page
                in: query
                description: Page number for pagination (default is 1)
                required: false
                schema:
                  type: integer
                  example: 1
              - name: limit
                in: query
                description: Results per page (default is 10)
                required: false
                schema:
                  type: integer
                  example: 10
          responses:
            allOf:
              - '200':
                  description: Statistics fetched successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          stats:
                            type: array
                            items:
                              type: object
                              properties:
                                shortLink:
                                  type: string
                                  example: abc123
                                originalUrl:
                                  type: string
                                  example: 'https://www.example.com'
                                totalClicks:
                                  type: integer
                                  example: 123
                          pagination:
                            type: object
                            properties:
                              totalUrls:
                                type: integer
                                example: 50
                                description: >-
                                  Total number of URLs for the user (calculated
                                  dynamically)
                              totalPages:
                                type: integer
                                example: 5
                                description: >-
                                  Total number of pages for pagination
                                  (calculated dynamically)
                              currentPage:
                                type: integer
                                example: 1
                                description: Current page number (provided by the user)
                              limit:
                                type: integer
                                example: 10
                                description: >-
                                  Limit of results per page (provided by the
                                  user)
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/stats/{shortId}':
    get:
      tags:
        - Stats
      summary: Get statistics for a specific URL
      description: >-
        Returns the statistics of a specific URL by its shortId, including total
        clicks, device types, and locations.
      allOf:
        - parameters:
            allOf:
              - name: id
                in: path
                required: true
                description: The ID of the user to retrieve
                schema:
                  type: string
                  example: abc123
              - name: shortId
                in: path
                description: Short ID of the URL
                required: true
                schema:
                  type: string
                  example: abc123short
          responses:
            allOf:
              - '200':
                  description: Statistics fetched successfully.
                  content:
                    application/json:
                      schema:
                        allOf:
                          - type: object
                            properties:
                              shortLink:
                                type: string
                                example: abc123
                              originalUrl:
                                type: string
                                example: 'https://www.example.com'
                              totalClicks:
                                type: integer
                                example: 123
                          - type: object
                            properties:
                              detailedClicks:
                                type: object
                                properties:
                                  locationsCount:
                                    type: object
                                    additionalProperties:
                                      type: integer
                                    example:
                                      USA: 100
                                      Canada: 23
                                  mobileClicks:
                                    type: integer
                                    example: 85
                                  desktopClicks:
                                    type: integer
                                    example: 38
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/stats':
    get:
      tags:
        - Stats
      summary: Get general statistics for the user's URLs
      description: >-
        Returns the statistics of the user's URLs, including total clicks per
        URL.
      allOf:
        - parameters:
            allOf:
              - name: id
                in: path
                required: true
                description: The ID of the user to retrieve
                schema:
                  type: string
                  example: abc123
              - name: page
                in: query
                description: Page number for pagination (default is 1)
                required: false
                schema:
                  type: integer
                  example: 1
              - name: limit
                in: query
                description: Results per page (default is 10)
                required: false
                schema:
                  type: integer
                  example: 10
          responses:
            allOf:
              - '200':
                  description: Statistics fetched successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          stats:
                            type: array
                            items:
                              type: object
                              properties:
                                shortLink:
                                  type: string
                                  example: abc123
                                originalUrl:
                                  type: string
                                  example: 'https://www.example.com'
                                totalClicks:
                                  type: integer
                                  example: 123
                          pagination:
                            type: object
                            properties:
                              totalUrls:
                                type: integer
                                example: 50
                                description: >-
                                  Total number of URLs for the user (calculated
                                  dynamically)
                              totalPages:
                                type: integer
                                example: 5
                                description: >-
                                  Total number of pages for pagination
                                  (calculated dynamically)
                              currentPage:
                                type: integer
                                example: 1
                                description: Current page number (provided by the user)
                              limit:
                                type: integer
                                example: 10
                                description: >-
                                  Limit of results per page (provided by the
                                  user)
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/stats/{shortId}':
    get:
      tags:
        - Stats
      summary: Get statistics for a specific URL
      description: >-
        Returns the statistics of a specific URL by its shortId, including total
        clicks, device types, and locations.
      allOf:
        - parameters:
            allOf:
              - name: id
                in: path
                required: true
                description: The ID of the user to retrieve
                schema:
                  type: string
                  example: abc123
              - name: shortId
                in: path
                description: Short ID of the URL
                required: true
                schema:
                  type: string
                  example: abc123short
          responses:
            allOf:
              - '200':
                  description: Statistics fetched successfully.
                  content:
                    application/json:
                      schema:
                        allOf:
                          - type: object
                            properties:
                              shortLink:
                                type: string
                                example: abc123
                              originalUrl:
                                type: string
                                example: 'https://www.example.com'
                              totalClicks:
                                type: integer
                                example: 123
                          - type: object
                            properties:
                              detailedClicks:
                                type: object
                                properties:
                                  locationsCount:
                                    type: object
                                    additionalProperties:
                                      type: integer
                                    example:
                                      USA: 100
                                      Canada: 23
                                  mobileClicks:
                                    type: integer
                                    example: 85
                                  desktopClicks:
                                    type: integer
                                    example: 38
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  /invited/shortenId:
    post:
      tags:
        - URLs
      summary: Shorten a URL link
      description: >-
        This function allows non-registered users to shorten a URL. The
        shortened URL expires after 24 hours by default.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                originalUrl:
                  type: string
                  description: The original URL to be shortened.
                  example: 'https://example.com/some/long/url'
              required:
                - originalUrl
      responses:
        allOf:
          - '201':
              description: URL shortened successfully
              content:
                application/json:
                  schema:
                    allOf:
                      - type: object
                        properties:
                          originalUrl:
                            type: string
                            description: Original URL.
                            example: 'https://example.com/some/long/url'
                          shortId:
                            type: string
                            description: Custom url ID.
                            example: CustomID
                          user:
                            type: string
                            description: >-
                              ID of the user who owns the URL (MongoDB
                              ObjectId).
                            example: 60d5f3a0f8d2e87d8f0f8c9b
                            nullable: true
                        required:
                          - originalUrl
                          - shortId
                        additionalProperties: false
                      - type: object
                        properties:
                          expiresAt:
                            type: string
                            format: date-time
                            description: The expiration date and time for the short URL.
                            example: '2024-06-15T12:00:00.000Z'
          - '400':
              description: >-
                The request could not be processed due to invalid or duplicated
                input, missing parameters, or mismatched data.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          The request could not be processed due to invalid or
                          expired input, missing parameters, or mismatched data.
            '401':
              description: >-
                You are not authorized to access this resource. Please log in
                and try again.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          You are not authorized to access this resource. Please
                          log in and try again.
            '404':
              description: >-
                The requested resource could not be found. Please check the
                provided data and try again.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          The requested resource could not be found. Please
                          check the provided data and try again.
            '500':
              description: >-
                An unexpected error occurred on the server. Please try again
                later.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          An unexpected error occurred on the server. Please try
                          again later.
  '/{shortId}':
    get:
      summary: Redirect to the original URL using the short ID
      description: >-
        Finds the original URL by the provided short ID and redirects the user.
        Tracks the click event and handles expired or invalid URLs.
      tags:
        - URLs
      parameters:
        name: shortId
        in: path
        required: true
        description: The unique short identifier for the URL.
        schema:
          type: string
          example: abc123
      responses:
        allOf:
          - '302':
              description: Redirects to the original URL.
              headers:
                Location:
                  description: The original URL to which the client is redirected.
                  schema:
                    type: string
                    example: 'https://example.com/original-page'
          - '400':
              description: >-
                The request could not be processed due to invalid or duplicated
                input, missing parameters, or mismatched data.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          The request could not be processed due to invalid or
                          expired input, missing parameters, or mismatched data.
            '401':
              description: >-
                You are not authorized to access this resource. Please log in
                and try again.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          You are not authorized to access this resource. Please
                          log in and try again.
            '404':
              description: >-
                The requested resource could not be found. Please check the
                provided data and try again.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          The requested resource could not be found. Please
                          check the provided data and try again.
            '500':
              description: >-
                An unexpected error occurred on the server. Please try again
                later.
              content:
                application/json:
                  schema:
                    type: object
                    properties:
                      message:
                        type: string
                        description: A detailed message about the error.
                        example: >-
                          An unexpected error occurred on the server. Please try
                          again later.
  '/admin-user/{id}/urls/shorten':
    post:
      tags:
        - URLs
      summary: Shorten a URL for a user.
      description: Shorten a URL for a users
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            $ref: ./requestBodies.yaml##/URLs
          responses:
            allOf:
              - '201':
                  description: URL shortened successfully
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          originalUrl:
                            type: string
                            description: Original URL.
                            example: 'https://example.com/some/long/url'
                          shortId:
                            type: string
                            description: Custom url ID.
                            example: CustomID
                          user:
                            type: string
                            description: >-
                              ID of the user who owns the URL (MongoDB
                              ObjectId).
                            example: 60d5f3a0f8d2e87d8f0f8c9b
                            nullable: true
                        required:
                          - originalUrl
                          - shortId
                        additionalProperties: false
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/urls/shorten':
    post:
      tags:
        - URLs
      summary: Shorten a URL for a user.
      description: Shorten a URL for a users
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            $ref: ./requestBodies.yaml##/URLs
          responses:
            allOf:
              - '201':
                  description: URL shortened successfully
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          originalUrl:
                            type: string
                            description: Original URL.
                            example: 'https://example.com/some/long/url'
                          shortId:
                            type: string
                            description: Custom url ID.
                            example: CustomID
                          user:
                            type: string
                            description: >-
                              ID of the user who owns the URL (MongoDB
                              ObjectId).
                            example: 60d5f3a0f8d2e87d8f0f8c9b
                            nullable: true
                        required:
                          - originalUrl
                          - shortId
                        additionalProperties: false
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/admin-user/{id}/urls/delete':
    delete:
      tags:
        - URLs
      summary: Delete user's URLs
      description: >-
        Delete one or multiple shortened URLs associated with the user's
        account.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    shortIds:
                      type: array
                      items:
                        type: string
                      description: An array of short IDs representing the URLs to delete.
                  required:
                    - shortIds
          responses:
            allOf:
              - '200':
                  description: URLs deletion was successfull.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: 3 URLs deleted successfully
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/urls/delete':
    delete:
      tags:
        - URLs
      summary: Delete user's URLs
      description: >-
        Delete one or multiple shortened URLs associated with the user's
        account.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    shortIds:
                      type: array
                      items:
                        type: string
                      description: An array of short IDs representing the URLs to delete.
                  required:
                    - shortIds
          responses:
            allOf:
              - '200':
                  description: URLs deletion was successfull.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: 3 URLs deleted successfully
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}':
    get:
      tags:
        - User
      summary: Get user details by ID.
      description: >-
        Retrieve detailed information for a specific user by their unique
        identifier.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          responses:
            allOf:
              - '200':
                  description: User successfully created or retrieved.
                  content:
                    application/json:
                      schema:
                        allOf:
                          - type: object
                            properties:
                              username:
                                type: string
                                description: The username of the user
                                example: newUser123
                              email:
                                type: string
                                format: email
                                description: The email of the user
                                example: newEmail@example.com
                              isAdmin:
                                type: boolean
                                description: >-
                                  A flag indicating whether the user is an
                                  admin. Default is false for regular users.
                                default: false
                            required:
                              - username
                              - email
                              - isAdmin
                          - type: object
                            properties:
                              _id:
                                type: string
                                description: Unique identifier for the user
                              urls:
                                type: array
                                items:
                                  type: string
                                  format: uuid
                                  description: >-
                                    Array of URLs associated with the user
                                    (references to other documents)
                              createdAt:
                                type: string
                                format: date-time
                                description: The date and time when the user was created
                              updatedAt:
                                type: string
                                format: date-time
                                description: >-
                                  The date and time when the user was last
                                  updated
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
    put:
      tags:
        - User
      summary: Update user information by ID
      description: >-
        Update the details of a specific user by their ID, without modifying the
        password.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            description: Datos para actualizar un usuario.
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    username:
                      type: string
                      description: The username of the user
                      example: newUser123
                    email:
                      type: string
                      format: email
                      description: The email of the user
                      example: newEmail@example.com
                    isAdmin:
                      type: boolean
                      description: >-
                        A flag indicating whether the user is an admin. Default
                        is false for regular users.
                      default: false
                  required:
                    - username
                    - email
                    - isAdmin
          responses:
            allOf:
              - '200':
                  description: User updated successfully.
                  content:
                    application/json:
                      schema:
                        - type: object
                          properties:
                            username:
                              type: string
                              description: The username of the user
                              example: newUser123
                            email:
                              type: string
                              format: email
                              description: The email of the user
                              example: newEmail@example.com
                            isAdmin:
                              type: boolean
                              description: >-
                                A flag indicating whether the user is an admin.
                                Default is false for regular users.
                              default: false
                          required:
                            - username
                            - email
                            - isAdmin
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/change-password':
    put:
      tags:
        - User
      summary: Change a user's password
      description: Change a user's password by providing the current and new passwords.
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            description: Datos para cambiar la contraseña de un usuario.
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    currentPassword:
                      type: string
                      description: Contraseña actual del usuario.
                      example: '123456'
                    newPassword:
                      type: string
                      description: Nueva contraseña que desea establecer.
                      example: newpassword123
                    confirmPassword:
                      type: string
                      description: Confirmación de la nueva contraseña.
                      example: newpassword123
                  additionalProperties: false
          responses:
            allOf:
              - '200':
                  description: password updated successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: You have successfully updated your password.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/setup-password':
    post:
      tags:
        - User
      summary: Set up a password
      description: >-
        Allows users to set their password after account creation via a secure
        link sent by email.
      allOf:
        - requestBody:
            description: Request body for setting up a new password after account creation
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    token:
                      type: string
                      description: The token sent to the user in the password setup email.
                    newPassword:
                      type: string
                      description: The new password the user wants to set.
                    confirmPassword:
                      type: string
                      description: >-
                        Confirmation of the new password to ensure both
                        passwords match.
                  required:
                    - token
                    - newPassword
                    - confirmPassword
          responses:
            allOf:
              - '200':
                  description: password updated successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: You have successfully updated your password.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/request-newPassword':
    post:
      tags:
        - User
      summary: Request a password reset
      description: >-
        Sends a password reset email to the provided email address with a reset
        link.
      allOf:
        - requestBody:
            description: Request body for setting up a new password after account creation
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    email:
                      type: string
                      format: email
                      description: >-
                        The email address of the user requesting a password
                        reset.
                      example: user@example.com
          responses:
            allOf:
              - '200':
                  description: Password reset email sent successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: >-
                              Password reset email has been sent. Please check
                              your inbox.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/request-deletion':
    post:
      tags:
        - User
      summary: Account deletion request
      description: >
        Allows a user to request their account deletion. - **Regular users** can
        only schedule their own account for deletion (default is 24 hours).
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          requestBody:
            required: true
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    deletionTimeInHours:
                      type: integer
                      description: >
                        The number of hours until the account is deleted.   - If
                        0 or omitted, the deletion is immediate (for admins).  
                        - Must be a positive number to schedule a future
                        deletion.
                      example: 48
                  required:
                    - deletionTimeInHours
          responses:
            allOf:
              - '200':
                  description: Request submitted successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: >-
                              Your account deletion will be completed in 24
                              hours.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
  '/user/{id}/cancel-deletion':
    post:
      tags:
        - User
      summary: Cancel account deletion.
      description: Cancel account deletion (before the 24-hour period ends).
      allOf:
        - parameters:
            - name: id
              in: path
              required: true
              description: The ID of the user to retrieve
              schema:
                type: string
                example: abc123
          responses:
            allOf:
              - '200':
                  description: Request submitted successfully.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            example: >-
                              Your account deletion has been canceled. Thank you
                              for continuing to use our service.
              - '400':
                  description: >-
                    The request could not be processed due to invalid or
                    duplicated input, missing parameters, or mismatched data.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The request could not be processed due to invalid
                              or expired input, missing parameters, or
                              mismatched data.
                '401':
                  description: >-
                    You are not authorized to access this resource. Please log
                    in and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              You are not authorized to access this resource.
                              Please log in and try again.
                '404':
                  description: >-
                    The requested resource could not be found. Please check the
                    provided data and try again.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              The requested resource could not be found. Please
                              check the provided data and try again.
                '500':
                  description: >-
                    An unexpected error occurred on the server. Please try again
                    later.
                  content:
                    application/json:
                      schema:
                        type: object
                        properties:
                          message:
                            type: string
                            description: A detailed message about the error.
                            example: >-
                              An unexpected error occurred on the server. Please
                              try again later.
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

